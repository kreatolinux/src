.\" Automatically generated by Pandoc 3.1.3
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "kpkg_repl" "8" "" "" ""
.hy
.SH NAME
.PP
kpkg repl - interactive shell for kpkg
.SH DESCRIPTION
.PP
\f[B]kpkg repl\f[R] starts an interactive read-eval-print loop (REPL)
for kpkg.
It provides a powerful environment to inspect package information,
modify configurations, and script kpkg operations using the
\f[B]run3\f[R] scripting language.
.PP
The REPL supports session history (persisted to
\f[V]\[ti]/.cache/kpkg/history\f[R]), multi-line input for function
definitions and blocks, and convenient shorthands for common
\f[V]get\f[R] and \f[V]set\f[R] operations.
.SH SYNOPSIS
.PP
\f[B]kpkg repl\f[R] [COMMAND] [ARGS]\&...
.PP
If no arguments are provided, it enters the interactive mode.
If arguments are provided, it executes the single command and exits
(similar to \f[V]bash -c\f[R]).
.SH COMMANDS
.SS INTERACTIVE COMMANDS
.PP
The following commands are available within the REPL prompt
(\f[V]kpkg>\f[R]).
.SS get [INVOCATION]
.PP
Retrieves values from the database, configuration, overrides, or
dependency graph.
.PP
\f[B]TYPES\f[R]: * \f[V]db\f[R]: Get values from the database.
* \f[V]config\f[R]: Get values from the config.
* \f[V]overrides\f[R]: Get value from a package override.
* \f[V]depends\f[R]: Get dependency list for a package.
.PP
\f[B]EXAMPLES\f[R]:
.IP
.nf
\f[C]
# Get version of package \[aq]kpkg\[aq]
kpkg> get db.package.kpkg.version

# List all config sections
kpkg> get config

# Get specific config value
kpkg> get config.Repositories.repoLinks
\f[R]
.fi
.SS set [INVOCATION] [VALUE]
.PP
Sets values in the configuration or overrides.
.PP
\f[B]TYPES\f[R]: * \f[V]config\f[R]: Set config values.
* \f[V]overrides\f[R]: Set package overrides.
.PP
\f[B]EXAMPLES\f[R]:
.IP
.nf
\f[C]
# Set a config value
kpkg> set config.General.Color true

# Set an override flag
kpkg> set overrides.bash.cflags \[dq]-O3\[dq]
\f[R]
.fi
.SS history
.PP
Displays the command history for the current user.
.SS exit / quit
.PP
Exits the REPL session.
.SS clear
.PP
Clears the terminal screen.
.SS RUN3 SCRIPTING
.PP
The REPL supports full \f[B]run3\f[R] syntax, allowing for complex
logic, loops, and custom function definitions directly in the shell.
.PP
\f[B]printing\f[R]:
.IP
.nf
\f[C]
print \[dq]Hello World\[dq]
\f[R]
.fi
.PP
\f[B]Variables\f[R]:
.IP
.nf
\f[C]
local x = 10
print $x
\f[R]
.fi
.PP
\f[B]Conditionals\f[R]:
.IP
.nf
\f[C]
if true {
    print \[dq]It\[aq]s true!\[dq]
}
\f[R]
.fi
.PP
\f[B]Functions\f[R]:
.IP
.nf
\f[C]
func my_helper {
    print \[dq]Inside helper\[dq]
}
my_helper
\f[R]
.fi
.SH FILES
.IP \[bu] 2
\f[V]\[ti]/.cache/kpkg/history\f[R]: Stores the history of typed
commands.
.SH EXAMPLES
.PP
\f[B]One-off command execution:\f[R]
.IP
.nf
\f[C]
kpkg repl get config.Repositories
\f[R]
.fi
.PP
\f[B]Interactive session:\f[R]
.IP
.nf
\f[C]
$ kpkg repl
kpkg> local pkg = \[dq]bash\[dq]
kpkg> get db.package.$pkg.version
5.2.15
kpkg> exit
\f[R]
.fi
.SH SEE ALSO
.PP
kpkg(8), kpkg.conf(5), kpkg_run(5)
.SH AUTHOR
.PP
Written by Kreato.
.SH COPYRIGHT
.PP
kpkg is free software: you can redistribute it and/or modify it under
the terms of the GNU General Public License as published by the Free
Software Foundation, either version 3 of the License, or (at your
option) any later version.
.PP
kpkg is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License for more details.
.PP
You should have received a copy of the GNU General Public License along
with kpkg.
If not, see <https://www.gnu.org/licenses/>.
